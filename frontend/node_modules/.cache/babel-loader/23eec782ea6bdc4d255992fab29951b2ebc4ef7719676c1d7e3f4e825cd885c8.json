{"ast":null,"code":"var _jsxFileName = \"/Users/jacobfu/Desktop/Projects/TDP/apps/frontend/src/features/tdp-tm/pages/BidStatusUpdates.tsx\",\n  _s = $RefreshSig$();\n// apps/frontend/src/features/tdp-lg/pages/BidStatusUpdates.tsx\nimport React, { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport io from 'socket.io-client';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BidStatusUpdates = () => {\n  _s();\n  const [connected, setConnected] = useState(false);\n  const [bidEvents, setBidEvents] = useState([]);\n  const [tenderEvents, setTenderEvents] = useState([]);\n  useEffect(() => {\n    const token = localStorage.getItem('access_token') || '';\n\n    // Connect via socket.io\n    const socket = io('http://localhost:3000', {\n      transports: ['websocket'],\n      query: {\n        token\n      }\n    });\n    socket.on('connect', () => {\n      console.log('Socket connected:', socket.id);\n      setConnected(true);\n    });\n    socket.on('disconnect', () => {\n      console.log('Socket disconnected');\n      setConnected(false);\n    });\n\n    // BIDS\n    socket.on('bidInserted', data => {\n      console.log('bidInserted event:', data.bid);\n      if (!data.bid) return;\n      toast.info(`New bid inserted: ${data.bid.bid_id}`);\n      setBidEvents(prev => [`INSERT => ID: ${data.bid.bid_id}`, ...prev]);\n    });\n    socket.on('bidUpdated', data => {\n      console.log('bidUpdated event:', data.bid);\n      if (!data.bid) return;\n      toast.info(`Bid updated: ${data.bid.bid_id} => ${data.bid.bid_status}`);\n      setBidEvents(prev => [`UPDATE => ID: ${data.bid.bid_id}, status: ${data.bid.bid_status}`, ...prev]);\n    });\n    socket.on('bidDeleted', data => {\n      console.log('bidDeleted event:', data.bid);\n      if (!data.bid) return;\n      toast.error(`Bid deleted: ${data.bid.bid_id}`);\n      setBidEvents(prev => [`DELETE => ID: ${data.bid.bid_id}`, ...prev]);\n    });\n\n    // TENDERS\n    socket.on('tenderInserted', data => {\n      console.log('tenderInserted event:', data.tender);\n      if (!data.tender) return;\n      toast.info(`New tender inserted: ${data.tender.submission_id}`);\n      setTenderEvents(prev => [`INSERT => ID: ${data.tender.submission_id}`, ...prev]);\n    });\n    socket.on('tenderUpdated', data => {\n      console.log('tenderUpdated event:', data.tender);\n      if (!data.tender) return;\n      toast.info(`Tender updated: ${data.tender.submission_id} => ${data.tender.status}`);\n      setTenderEvents(prev => [`UPDATE => ID: ${data.tender.submission_id}, status: ${data.tender.status}`, ...prev]);\n    });\n    socket.on('tenderDeleted', data => {\n      console.log('tenderDeleted event:', data.tender);\n      if (!data.tender) return;\n      toast.error(`Tender deleted: ${data.tender.submission_id}`);\n      setTenderEvents(prev => [`DELETE => ID: ${data.tender.submission_id}`, ...prev]);\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '1rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Bid Status Updates\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Socket Connection: \", connected ? 'Connected' : 'Not Connected']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Recent Bid Events:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), bidEvents.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No bid events yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: bidEvents.map((evt, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: evt\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Recent Tender Events:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), tenderEvents.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No tender events yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: tenderEvents.map((evt, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: evt\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_s(BidStatusUpdates, \"4oSbHOYJD7fD8GqcthSX4+gIYn0=\");\n_c = BidStatusUpdates;\nexport default BidStatusUpdates;\nvar _c;\n$RefreshReg$(_c, \"BidStatusUpdates\");","map":{"version":3,"names":["React","useEffect","useState","toast","io","jsxDEV","_jsxDEV","BidStatusUpdates","_s","connected","setConnected","bidEvents","setBidEvents","tenderEvents","setTenderEvents","token","localStorage","getItem","socket","transports","query","on","console","log","id","data","bid","info","bid_id","prev","bid_status","error","tender","submission_id","status","disconnect","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","evt","idx","_c","$RefreshReg$"],"sources":["/Users/jacobfu/Desktop/Projects/TDP/apps/frontend/src/features/tdp-tm/pages/BidStatusUpdates.tsx"],"sourcesContent":["// apps/frontend/src/features/tdp-lg/pages/BidStatusUpdates.tsx\nimport React, { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport io from 'socket.io-client';\nimport 'react-toastify/dist/ReactToastify.css';\n\ninterface UpdatedBid {\n  bid_id?: string;\n  bid_status?: string;\n  [key: string]: any;\n}\ninterface UpdatedTender {\n  submission_id?: string;\n  status?: string;\n  [key: string]: any;\n}\n\nconst BidStatusUpdates: React.FC = () => {\n  const [connected, setConnected] = useState<boolean>(false);\n\n  \n  const [bidEvents, setBidEvents] = useState<string[]>([]);\n  const [tenderEvents, setTenderEvents] = useState<string[]>([]);\n\n  useEffect(() => {\n    const token = localStorage.getItem('access_token') || '';\n\n    // Connect via socket.io\n    const socket = io('http://localhost:3000', {\n      transports: ['websocket'],\n      query: { token },\n    });\n\n    socket.on('connect', () => {\n      console.log('Socket connected:', socket.id);\n      setConnected(true);\n    });\n    socket.on('disconnect', () => {\n      console.log('Socket disconnected');\n      setConnected(false);\n    });\n\n    // BIDS\n    socket.on('bidInserted', (data: { bid: UpdatedBid }) => {\n      console.log('bidInserted event:', data.bid);\n      if (!data.bid) return;\n      toast.info(`New bid inserted: ${data.bid.bid_id}`);\n      setBidEvents((prev) => [\n        `INSERT => ID: ${data.bid.bid_id}`,\n        ...prev,\n      ]);\n    });\n\n    socket.on('bidUpdated', (data: { bid: UpdatedBid }) => {\n      console.log('bidUpdated event:', data.bid);\n      if (!data.bid) return;\n      toast.info(`Bid updated: ${data.bid.bid_id} => ${data.bid.bid_status}`);\n      setBidEvents((prev) => [\n        `UPDATE => ID: ${data.bid.bid_id}, status: ${data.bid.bid_status}`,\n        ...prev,\n      ]);\n    });\n\n    socket.on('bidDeleted', (data: { bid: UpdatedBid }) => {\n      console.log('bidDeleted event:', data.bid);\n      if (!data.bid) return;\n      toast.error(`Bid deleted: ${data.bid.bid_id}`);\n      setBidEvents((prev) => [\n        `DELETE => ID: ${data.bid.bid_id}`,\n        ...prev,\n      ]);\n    });\n\n    // TENDERS\n    socket.on('tenderInserted', (data: { tender: UpdatedTender }) => {\n      console.log('tenderInserted event:', data.tender);\n      if (!data.tender) return;\n      toast.info(`New tender inserted: ${data.tender.submission_id}`);\n      setTenderEvents((prev) => [\n        `INSERT => ID: ${data.tender.submission_id}`,\n        ...prev,\n      ]);\n    });\n\n    socket.on('tenderUpdated', (data: { tender: UpdatedTender }) => {\n      console.log('tenderUpdated event:', data.tender);\n      if (!data.tender) return;\n      toast.info(`Tender updated: ${data.tender.submission_id} => ${data.tender.status}`);\n      setTenderEvents((prev) => [\n        `UPDATE => ID: ${data.tender.submission_id}, status: ${data.tender.status}`,\n        ...prev,\n      ]);\n    });\n\n    socket.on('tenderDeleted', (data: { tender: UpdatedTender }) => {\n      console.log('tenderDeleted event:', data.tender);\n      if (!data.tender) return;\n      toast.error(`Tender deleted: ${data.tender.submission_id}`);\n      setTenderEvents((prev) => [\n        `DELETE => ID: ${data.tender.submission_id}`,\n        ...prev,\n      ]);\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  return (\n    <div style={{ padding: '1rem' }}>\n      <h2>Bid Status Updates</h2>\n      <p>Socket Connection: {connected ? 'Connected' : 'Not Connected'}</p>\n\n      <hr />\n      <h3>Recent Bid Events:</h3>\n      {bidEvents.length === 0 ? (\n        <p>No bid events yet.</p>\n      ) : (\n        <ul>\n          {bidEvents.map((evt, idx) => (\n            <li key={idx}>{evt}</li>\n          ))}\n        </ul>\n      )}\n\n      <hr />\n      <h3>Recent Tender Events:</h3>\n      {tenderEvents.length === 0 ? (\n        <p>No tender events yet.</p>\n      ) : (\n        <ul>\n          {tenderEvents.map((evt, idx) => (\n            <li key={idx}>{evt}</li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default BidStatusUpdates;\n\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAO,uCAAuC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAa/C,MAAMC,gBAA0B,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAU,KAAK,CAAC;EAG1D,MAAM,CAACS,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAW,EAAE,CAAC;EACxD,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAW,EAAE,CAAC;EAE9DD,SAAS,CAAC,MAAM;IACd,MAAMc,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,EAAE;;IAExD;IACA,MAAMC,MAAM,GAAGd,EAAE,CAAC,uBAAuB,EAAE;MACzCe,UAAU,EAAE,CAAC,WAAW,CAAC;MACzBC,KAAK,EAAE;QAAEL;MAAM;IACjB,CAAC,CAAC;IAEFG,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,MAAM;MACzBC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEL,MAAM,CAACM,EAAE,CAAC;MAC3Cd,YAAY,CAAC,IAAI,CAAC;IACpB,CAAC,CAAC;IACFQ,MAAM,CAACG,EAAE,CAAC,YAAY,EAAE,MAAM;MAC5BC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClCb,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC;;IAEF;IACAQ,MAAM,CAACG,EAAE,CAAC,aAAa,EAAGI,IAAyB,IAAK;MACtDH,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEE,IAAI,CAACC,GAAG,CAAC;MAC3C,IAAI,CAACD,IAAI,CAACC,GAAG,EAAE;MACfvB,KAAK,CAACwB,IAAI,CAAC,qBAAqBF,IAAI,CAACC,GAAG,CAACE,MAAM,EAAE,CAAC;MAClDhB,YAAY,CAAEiB,IAAI,IAAK,CACrB,iBAAiBJ,IAAI,CAACC,GAAG,CAACE,MAAM,EAAE,EAClC,GAAGC,IAAI,CACR,CAAC;IACJ,CAAC,CAAC;IAEFX,MAAM,CAACG,EAAE,CAAC,YAAY,EAAGI,IAAyB,IAAK;MACrDH,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEE,IAAI,CAACC,GAAG,CAAC;MAC1C,IAAI,CAACD,IAAI,CAACC,GAAG,EAAE;MACfvB,KAAK,CAACwB,IAAI,CAAC,gBAAgBF,IAAI,CAACC,GAAG,CAACE,MAAM,OAAOH,IAAI,CAACC,GAAG,CAACI,UAAU,EAAE,CAAC;MACvElB,YAAY,CAAEiB,IAAI,IAAK,CACrB,iBAAiBJ,IAAI,CAACC,GAAG,CAACE,MAAM,aAAaH,IAAI,CAACC,GAAG,CAACI,UAAU,EAAE,EAClE,GAAGD,IAAI,CACR,CAAC;IACJ,CAAC,CAAC;IAEFX,MAAM,CAACG,EAAE,CAAC,YAAY,EAAGI,IAAyB,IAAK;MACrDH,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEE,IAAI,CAACC,GAAG,CAAC;MAC1C,IAAI,CAACD,IAAI,CAACC,GAAG,EAAE;MACfvB,KAAK,CAAC4B,KAAK,CAAC,gBAAgBN,IAAI,CAACC,GAAG,CAACE,MAAM,EAAE,CAAC;MAC9ChB,YAAY,CAAEiB,IAAI,IAAK,CACrB,iBAAiBJ,IAAI,CAACC,GAAG,CAACE,MAAM,EAAE,EAClC,GAAGC,IAAI,CACR,CAAC;IACJ,CAAC,CAAC;;IAEF;IACAX,MAAM,CAACG,EAAE,CAAC,gBAAgB,EAAGI,IAA+B,IAAK;MAC/DH,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEE,IAAI,CAACO,MAAM,CAAC;MACjD,IAAI,CAACP,IAAI,CAACO,MAAM,EAAE;MAClB7B,KAAK,CAACwB,IAAI,CAAC,wBAAwBF,IAAI,CAACO,MAAM,CAACC,aAAa,EAAE,CAAC;MAC/DnB,eAAe,CAAEe,IAAI,IAAK,CACxB,iBAAiBJ,IAAI,CAACO,MAAM,CAACC,aAAa,EAAE,EAC5C,GAAGJ,IAAI,CACR,CAAC;IACJ,CAAC,CAAC;IAEFX,MAAM,CAACG,EAAE,CAAC,eAAe,EAAGI,IAA+B,IAAK;MAC9DH,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEE,IAAI,CAACO,MAAM,CAAC;MAChD,IAAI,CAACP,IAAI,CAACO,MAAM,EAAE;MAClB7B,KAAK,CAACwB,IAAI,CAAC,mBAAmBF,IAAI,CAACO,MAAM,CAACC,aAAa,OAAOR,IAAI,CAACO,MAAM,CAACE,MAAM,EAAE,CAAC;MACnFpB,eAAe,CAAEe,IAAI,IAAK,CACxB,iBAAiBJ,IAAI,CAACO,MAAM,CAACC,aAAa,aAAaR,IAAI,CAACO,MAAM,CAACE,MAAM,EAAE,EAC3E,GAAGL,IAAI,CACR,CAAC;IACJ,CAAC,CAAC;IAEFX,MAAM,CAACG,EAAE,CAAC,eAAe,EAAGI,IAA+B,IAAK;MAC9DH,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEE,IAAI,CAACO,MAAM,CAAC;MAChD,IAAI,CAACP,IAAI,CAACO,MAAM,EAAE;MAClB7B,KAAK,CAAC4B,KAAK,CAAC,mBAAmBN,IAAI,CAACO,MAAM,CAACC,aAAa,EAAE,CAAC;MAC3DnB,eAAe,CAAEe,IAAI,IAAK,CACxB,iBAAiBJ,IAAI,CAACO,MAAM,CAACC,aAAa,EAAE,EAC5C,GAAGJ,IAAI,CACR,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO,MAAM;MACXX,MAAM,CAACiB,UAAU,CAAC,CAAC;IACrB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE7B,OAAA;IAAK8B,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAO,CAAE;IAAAC,QAAA,gBAC9BhC,OAAA;MAAAgC,QAAA,EAAI;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC3BpC,OAAA;MAAAgC,QAAA,GAAG,qBAAmB,EAAC7B,SAAS,GAAG,WAAW,GAAG,eAAe;IAAA;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAErEpC,OAAA;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACNpC,OAAA;MAAAgC,QAAA,EAAI;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC1B/B,SAAS,CAACgC,MAAM,KAAK,CAAC,gBACrBrC,OAAA;MAAAgC,QAAA,EAAG;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,gBAEzBpC,OAAA;MAAAgC,QAAA,EACG3B,SAAS,CAACiC,GAAG,CAAC,CAACC,GAAG,EAAEC,GAAG,kBACtBxC,OAAA;QAAAgC,QAAA,EAAeO;MAAG,GAATC,GAAG;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAW,CACxB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACL,eAEDpC,OAAA;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACNpC,OAAA;MAAAgC,QAAA,EAAI;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC7B7B,YAAY,CAAC8B,MAAM,KAAK,CAAC,gBACxBrC,OAAA;MAAAgC,QAAA,EAAG;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,gBAE5BpC,OAAA;MAAAgC,QAAA,EACGzB,YAAY,CAAC+B,GAAG,CAAC,CAACC,GAAG,EAAEC,GAAG,kBACzBxC,OAAA;QAAAgC,QAAA,EAAeO;MAAG,GAATC,GAAG;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAW,CACxB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACL;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAClC,EAAA,CA1HID,gBAA0B;AAAAwC,EAAA,GAA1BxC,gBAA0B;AA4HhC,eAAeA,gBAAgB;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}